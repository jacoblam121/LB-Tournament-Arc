2025-06-30 17:09:01 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 17:09:01 - bot.database.database - INFO - Initializing database...
2025-06-30 17:09:01 - bot.database.database - INFO - Database initialized successfully
2025-06-30 17:09:01 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 17:09:01 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 17:09:01 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 17:09:01 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 17:09:01 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 17:09:01 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 17:09:01 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 17:09:01 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 17:09:01 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 17:09:01 - __main__ - INFO - Successfully synced 11 command(s) to guild 743306931522764860
2025-06-30 17:09:01 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 17:09:01 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 17:09:01 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 17:09:01 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 17:09:01 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 17:09:01 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 17:09:01 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 17:09:01 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 17:09:01 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 17:09:01 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 17:09:01 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 17:09:01 - __main__ - INFO - Successfully synced 11 command(s) to guild 685704304983932949
2025-06-30 17:09:01 - __main__ - INFO - Multi-guild sync complete: 22 total command instances deployed
2025-06-30 17:09:01 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 17:09:04 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 17:09:04 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 17:09:04 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 17:09:04 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 17:09:16 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 17:09:16 - bot.database.database - INFO - Database connection closed
2025-06-30 17:09:16 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 18:17:03 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 18:17:03 - bot.database.database - INFO - Initializing database...
2025-06-30 18:17:03 - bot.database.database - INFO - Database initialized successfully
2025-06-30 18:17:03 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 18:17:03 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 18:17:03 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 18:17:03 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 18:17:03 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 18:17:03 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 18:17:03 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 18:17:03 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 18:17:03 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 18:17:03 - __main__ - INFO - Successfully synced 15 command(s) to guild 743306931522764860
2025-06-30 18:17:03 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 18:17:03 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 18:17:03 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 18:17:03 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 18:17:03 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 18:17:03 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 18:17:03 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 18:17:03 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 18:17:03 - __main__ - INFO -   - active-challenges: View your ongoing accepted challenges
2025-06-30 18:17:03 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 18:17:03 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 18:17:03 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 18:17:03 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 18:17:03 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 18:17:03 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 18:17:04 - __main__ - INFO - Successfully synced 15 command(s) to guild 685704304983932949
2025-06-30 18:17:04 - __main__ - INFO - Multi-guild sync complete: 30 total command instances deployed
2025-06-30 18:17:04 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 18:17:06 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 18:17:06 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 18:17:06 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 18:17:06 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 18:17:50 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 18:17:50 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 18:17:50 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 18:17:50 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 18:17:50 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 18:17:50 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 18:17:50 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 31 for event 21 with 2 participants
2025-06-30 18:17:50 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 31 for event 21 with 2 participants
2025-06-30 18:17:52 - bot.cogs.challenge - INFO - Challenge 31 created by 492208498533203970 for event VS (1v1)
2025-06-30 18:22:01 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 87 from Challenge 31 with 2 participants (1v1)
2025-06-30 18:22:01 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 87 from Challenge 31 with 2 participants (1v1)
2025-06-30 18:22:01 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 31 fully accepted - Match 87 created
2025-06-30 18:22:01 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 31 fully accepted - Match 87 created
2025-06-30 18:37:21 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 18:37:21 - bot.database.database - INFO - Database connection closed
2025-06-30 18:37:21 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 18:37:27 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 18:37:27 - bot.database.database - INFO - Initializing database...
2025-06-30 18:37:27 - bot.database.database - INFO - Database initialized successfully
2025-06-30 18:37:27 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 18:37:27 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 18:37:27 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 18:37:27 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 18:37:27 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 18:37:27 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 18:37:27 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 18:37:27 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 18:37:27 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 18:37:28 - __main__ - INFO - Successfully synced 15 command(s) to guild 743306931522764860
2025-06-30 18:37:28 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 18:37:28 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 18:37:28 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 18:37:28 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 18:37:28 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 18:37:28 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 18:37:28 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 18:37:28 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 18:37:28 - __main__ - INFO -   - active-challenges: View your ongoing accepted challenges and matches
2025-06-30 18:37:28 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 18:37:28 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 18:37:28 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 18:37:28 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 18:37:28 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 18:37:28 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 18:37:28 - __main__ - INFO - Successfully synced 15 command(s) to guild 685704304983932949
2025-06-30 18:37:28 - __main__ - INFO - Multi-guild sync complete: 30 total command instances deployed
2025-06-30 18:37:28 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 18:37:30 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 18:37:30 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 18:37:30 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 18:37:30 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 18:37:51 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 18:37:51 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 18:37:51 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 18:37:51 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 18:37:51 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 18:37:51 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 18:37:51 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 32 for event 29 with 2 participants
2025-06-30 18:37:51 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 32 for event 29 with 2 participants
2025-06-30 18:37:51 - bot.cogs.challenge - INFO - Challenge 32 created by 492208498533203970 for event Super Smash Flash 2 (1v1)
2025-06-30 18:52:37 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 18:52:37 - bot.database.database - INFO - Database connection closed
2025-06-30 18:52:37 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 18:52:42 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 18:52:42 - bot.database.database - INFO - Initializing database...
2025-06-30 18:52:42 - bot.database.database - INFO - Database initialized successfully
2025-06-30 18:52:42 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 18:52:42 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 18:52:42 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 18:52:42 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 18:52:42 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 18:52:42 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 18:52:42 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 18:52:42 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 18:52:42 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 18:52:42 - __main__ - INFO - Successfully synced 14 command(s) to guild 743306931522764860
2025-06-30 18:52:42 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 18:52:42 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 18:52:42 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 18:52:42 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 18:52:42 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 18:52:42 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 18:52:42 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 18:52:42 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 18:52:42 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 18:52:42 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 18:52:42 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 18:52:42 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 18:52:42 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 18:52:42 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 18:52:43 - __main__ - INFO - Successfully synced 14 command(s) to guild 685704304983932949
2025-06-30 18:52:43 - __main__ - INFO - Multi-guild sync complete: 28 total command instances deployed
2025-06-30 18:52:43 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 18:52:45 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 18:52:45 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 18:52:45 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 18:52:45 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 18:53:04 - bot.operations.player_operations - DEBUG - Found existing Player 11 for Discord user 358116499140902912
2025-06-30 18:53:04 - bot.operations.player_operations - DEBUG - Updated activity for Player 11
2025-06-30 18:53:04 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 18:53:04 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 18:53:04 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 18:53:04 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 18:53:05 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 33 for event 26 with 2 participants
2025-06-30 18:53:05 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 33 for event 26 with 2 participants
2025-06-30 18:53:05 - bot.cogs.challenge - INFO - Challenge 33 created by 492208498533203970 for event Quaver (1v1)
2025-06-30 18:54:40 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 88 from Challenge 33 with 2 participants (1v1)
2025-06-30 18:54:40 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 88 from Challenge 33 with 2 participants (1v1)
2025-06-30 18:54:40 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 33 fully accepted - Match 88 created
2025-06-30 18:54:40 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 33 fully accepted - Match 88 created
2025-06-30 18:59:37 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 18:59:37 - bot.database.database - INFO - Database connection closed
2025-06-30 18:59:37 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 19:20:28 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 19:20:28 - bot.database.database - INFO - Initializing database...
2025-06-30 19:20:28 - bot.database.database - INFO - Database initialized successfully
2025-06-30 19:20:28 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 19:20:28 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 19:20:28 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 19:20:28 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 19:20:28 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 19:20:28 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 19:20:28 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 19:20:28 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 19:20:28 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 19:20:28 - __main__ - INFO - Successfully synced 15 command(s) to guild 743306931522764860
2025-06-30 19:20:28 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 19:20:28 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 19:20:28 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 19:20:28 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 19:20:28 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 19:20:28 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 19:20:28 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 19:20:28 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 19:20:28 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 19:20:28 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 19:20:28 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 19:20:28 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 19:20:28 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 19:20:28 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 19:20:28 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 19:20:29 - __main__ - INFO - Successfully synced 15 command(s) to guild 685704304983932949
2025-06-30 19:20:29 - __main__ - INFO - Multi-guild sync complete: 30 total command instances deployed
2025-06-30 19:20:29 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 19:20:31 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 19:20:31 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 19:20:31 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 19:20:31 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 19:20:42 - __main__ - ERROR - Unexpected error in command active-matches: Hybrid command raised an error: Command 'active-matches' raised an exception: AttributeError: 'Context' object has no attribute 'response'
2025-06-30 19:20:42 - __main__ - ERROR - NoneType: None

2025-06-30 19:21:12 - __main__ - ERROR - Unexpected error in command active-matches: Hybrid command raised an error: Command 'active-matches' raised an exception: AttributeError: 'Context' object has no attribute 'response'
2025-06-30 19:21:12 - __main__ - ERROR - NoneType: None

2025-06-30 19:33:29 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 19:33:29 - bot.database.database - INFO - Database connection closed
2025-06-30 19:33:29 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 19:33:35 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 19:33:35 - bot.database.database - INFO - Initializing database...
2025-06-30 19:33:35 - bot.database.database - INFO - Database initialized successfully
2025-06-30 19:33:35 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 19:33:35 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 19:33:35 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 19:33:35 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 19:33:35 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 19:33:35 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 19:33:35 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 19:33:35 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 19:33:35 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 19:33:35 - __main__ - INFO - Successfully synced 15 command(s) to guild 743306931522764860
2025-06-30 19:33:35 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 19:33:35 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 19:33:35 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 19:33:35 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 19:33:35 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 19:33:35 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 19:33:35 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 19:33:35 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 19:33:35 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 19:33:35 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 19:33:35 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 19:33:35 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 19:33:35 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 19:33:35 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 19:33:35 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 19:33:35 - __main__ - INFO - Successfully synced 15 command(s) to guild 685704304983932949
2025-06-30 19:33:35 - __main__ - INFO - Multi-guild sync complete: 30 total command instances deployed
2025-06-30 19:33:35 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 19:33:37 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 19:33:37 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 19:33:37 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 19:33:37 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 19:34:03 - bot.database.match_operations - INFO - Retrieved 25 active matches for player 492208498533203970 (limit: 25)
2025-06-30 19:34:03 - bot.cogs.match_commands - ERROR - Error in active-matches command: 'NoneType' object has no attribute 'username'
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1446, in active_matches
    embed = self._create_active_matches_embed(matches, user)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1498, in _create_active_matches_embed
    name = participant.player.username
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'username'
2025-06-30 19:34:10 - bot.database.match_operations - INFO - Retrieved 12 active matches for player 358116499140902912 (limit: 25)
2025-06-30 19:34:10 - bot.cogs.match_commands - ERROR - Error in active-matches command: 'NoneType' object has no attribute 'cluster'
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1446, in active_matches
    embed = self._create_active_matches_embed(matches, user)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1531, in _create_active_matches_embed
    f"**Location:** `{match.event.cluster.name}` → `{match.event.name}`\n"
                      ^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'cluster'
2025-06-30 19:34:45 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 89 from Challenge 32 with 2 participants (1v1)
2025-06-30 19:34:45 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 89 from Challenge 32 with 2 participants (1v1)
2025-06-30 19:34:45 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 32 fully accepted - Match 89 created
2025-06-30 19:34:45 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 32 fully accepted - Match 89 created
2025-06-30 19:34:49 - bot.database.match_operations - INFO - Retrieved 25 active matches for player 492208498533203970 (limit: 25)
2025-06-30 19:34:49 - bot.cogs.match_commands - ERROR - Error in active-matches command: 'NoneType' object has no attribute 'username'
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1446, in active_matches
    embed = self._create_active_matches_embed(matches, user)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1498, in _create_active_matches_embed
    name = participant.player.username
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'username'
2025-06-30 20:38:08 - bot.database.match_operations - INFO - Retrieved 25 active matches for player 632154057477455882 (limit: 25)
2025-06-30 20:38:08 - bot.cogs.match_commands - ERROR - Error in active-matches command: 'NoneType' object has no attribute 'username'
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1446, in active_matches
    embed = self._create_active_matches_embed(matches, user)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1498, in _create_active_matches_embed
    for match in matches:
                   ^^^^^^^
AttributeError: 'NoneType' object has no attribute 'username'
2025-06-30 20:38:12 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 20:38:12 - bot.database.database - INFO - Database connection closed
2025-06-30 20:38:12 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 20:38:17 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 20:38:17 - bot.database.database - INFO - Initializing database...
2025-06-30 20:38:17 - bot.database.database - INFO - Database initialized successfully
2025-06-30 20:38:17 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 20:38:17 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 20:38:17 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 20:38:17 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 20:38:17 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 20:38:17 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 20:38:17 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 20:38:17 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 20:38:17 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 20:38:17 - __main__ - INFO - Successfully synced 15 command(s) to guild 743306931522764860
2025-06-30 20:38:17 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 20:38:17 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 20:38:17 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 20:38:17 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 20:38:17 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 20:38:17 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 20:38:17 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 20:38:17 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 20:38:17 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 20:38:17 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 20:38:17 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 20:38:17 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 20:38:17 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 20:38:17 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 20:38:17 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 20:38:18 - __main__ - INFO - Successfully synced 15 command(s) to guild 685704304983932949
2025-06-30 20:38:18 - __main__ - INFO - Multi-guild sync complete: 30 total command instances deployed
2025-06-30 20:38:18 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 20:38:20 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 20:38:20 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 20:38:20 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 20:38:20 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 20:38:22 - bot.database.match_operations - INFO - DIAGNOSTIC: Starting get_active_matches_for_player for discord_id 632154057477455882
2025-06-30 20:38:22 - bot.database.match_operations - INFO - DIAGNOSTIC: Found player 3 for discord_id 632154057477455882
2025-06-30 20:38:22 - bot.database.match_operations - INFO - DIAGNOSTIC: Executing query for player 3
2025-06-30 20:38:22 - bot.database.match_operations - INFO - DIAGNOSTIC: Query executed successfully, processing results
2025-06-30 20:38:22 - bot.database.match_operations - INFO - Retrieved 25 active matches for player 632154057477455882 (limit: 25)
2025-06-30 20:38:22 - bot.cogs.match_commands - ERROR - DIAGNOSTIC - active-matches failed for user 632154057477455882
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1446, in active_matches
    embed = self._create_active_matches_embed(matches, user)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1502, in _create_active_matches_embed
    name = participant.player.username
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'username'
2025-06-30 20:44:26 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 20:44:26 - bot.database.database - INFO - Database connection closed
2025-06-30 20:44:26 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 20:44:28 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 20:44:28 - bot.database.database - INFO - Initializing database...
2025-06-30 20:44:28 - bot.database.database - INFO - Database initialized successfully
2025-06-30 20:44:28 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 20:44:28 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 20:44:28 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 20:44:28 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 20:44:28 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 20:44:28 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 20:44:28 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 20:44:28 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 20:44:28 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 20:44:29 - __main__ - INFO - Successfully synced 15 command(s) to guild 743306931522764860
2025-06-30 20:44:29 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 20:44:29 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 20:44:29 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 20:44:29 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 20:44:29 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 20:44:29 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 20:44:29 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 20:44:29 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 20:44:29 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 20:44:29 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 20:44:29 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 20:44:29 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 20:44:29 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 20:44:29 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 20:44:29 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 20:44:29 - __main__ - INFO - Successfully synced 15 command(s) to guild 685704304983932949
2025-06-30 20:44:29 - __main__ - INFO - Multi-guild sync complete: 30 total command instances deployed
2025-06-30 20:44:29 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 20:44:31 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 20:44:31 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 20:44:31 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 20:44:31 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 20:44:33 - bot.database.match_operations - INFO - Retrieved 25 active matches for player 632154057477455882 (limit: 25)
2025-06-30 20:44:33 - bot.cogs.match_commands - ERROR - Error in active-matches command: 400 Bad Request (error code: 50035): Invalid Form Body
In embeds: Embed size exceeds maximum size of 6000
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1447, in active_matches
    await send_func(embed=embed)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/discord/ext/commands/context.py", line 1081, in send
    response = await self.interaction.response.send_message(**kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/discord/interactions.py", line 1004, in send_message
    response = await adapter.create_interaction_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/discord/webhook/async_.py", line 226, in request
    raise HTTPException(response, data)
discord.errors.HTTPException: 400 Bad Request (error code: 50035): Invalid Form Body
In embeds: Embed size exceeds maximum size of 6000
2025-06-30 20:44:33 - __main__ - ERROR - Unexpected error in command active-matches: Hybrid command raised an error: Command 'active-matches' raised an exception: NotFound: 404 Not Found (error code: 10062): Unknown interaction
2025-06-30 20:44:33 - __main__ - ERROR - NoneType: None

2025-06-30 20:44:38 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 20:44:38 - bot.database.database - INFO - Database connection closed
2025-06-30 20:44:38 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 20:44:40 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 20:44:40 - bot.database.database - INFO - Initializing database...
2025-06-30 20:44:40 - bot.database.database - INFO - Database initialized successfully
2025-06-30 20:44:40 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 20:44:40 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 20:44:40 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 20:44:40 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 20:44:40 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 20:44:40 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 20:44:40 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 20:44:40 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 20:44:40 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 20:45:07 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 20:45:07 - bot.database.database - INFO - Database connection closed
2025-06-30 20:45:07 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 20:45:12 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 20:45:12 - bot.database.database - INFO - Initializing database...
2025-06-30 20:45:12 - bot.database.database - INFO - Database initialized successfully
2025-06-30 20:45:12 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 20:45:12 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 20:45:12 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 20:45:12 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 20:45:12 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 20:45:12 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 20:45:12 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 20:45:12 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 20:45:12 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 20:45:59 - __main__ - INFO - Successfully synced 15 command(s) to guild 743306931522764860
2025-06-30 20:45:59 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 20:45:59 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 20:45:59 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 20:45:59 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 20:45:59 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 20:45:59 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 20:45:59 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 20:45:59 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 20:45:59 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 20:45:59 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 20:45:59 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 20:45:59 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 20:45:59 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 20:45:59 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 20:45:59 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 20:45:59 - __main__ - INFO - Successfully synced 15 command(s) to guild 685704304983932949
2025-06-30 20:45:59 - __main__ - INFO - Multi-guild sync complete: 30 total command instances deployed
2025-06-30 20:45:59 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 20:46:01 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 20:46:01 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 20:46:01 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 20:46:01 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 20:48:11 - bot.database.match_operations - INFO - Retrieved 25 active matches for player 632154057477455882 (limit: 25)
2025-06-30 20:48:11 - bot.cogs.match_commands - ERROR - Error in active-matches command: 400 Bad Request (error code: 50035): Invalid Form Body
In embeds: Embed size exceeds maximum size of 6000
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/match_commands.py", line 1447, in active_matches
    await send_func(embed=embed)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/discord/ext/commands/context.py", line 1081, in send
    response = await self.interaction.response.send_message(**kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/discord/interactions.py", line 1004, in send_message
    response = await adapter.create_interaction_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/discord/webhook/async_.py", line 226, in request
    raise HTTPException(response, data)
discord.errors.HTTPException: 400 Bad Request (error code: 50035): Invalid Form Body
In embeds: Embed size exceeds maximum size of 6000
2025-06-30 20:48:11 - __main__ - ERROR - Unexpected error in command active-matches: Hybrid command raised an error: Command 'active-matches' raised an exception: NotFound: 404 Not Found (error code: 10062): Unknown interaction
2025-06-30 20:48:11 - __main__ - ERROR - NoneType: None

2025-06-30 20:54:47 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 20:54:47 - bot.database.database - INFO - Database connection closed
2025-06-30 20:54:47 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 20:54:50 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 20:54:50 - bot.database.database - INFO - Initializing database...
2025-06-30 20:54:50 - bot.database.database - INFO - Database initialized successfully
2025-06-30 20:54:50 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 20:54:50 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 20:54:50 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 20:54:50 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 20:54:50 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 20:54:50 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 20:54:50 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 20:54:50 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 20:54:50 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 20:54:50 - __main__ - INFO - Successfully synced 15 command(s) to guild 743306931522764860
2025-06-30 20:54:50 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 20:54:50 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 20:54:50 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 20:54:50 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 20:54:50 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 20:54:50 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 20:54:50 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 20:54:50 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 20:54:50 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 20:54:50 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 20:54:50 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 20:54:50 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 20:54:50 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 20:54:50 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 20:54:50 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 20:54:50 - __main__ - INFO - Successfully synced 15 command(s) to guild 685704304983932949
2025-06-30 20:54:50 - __main__ - INFO - Multi-guild sync complete: 30 total command instances deployed
2025-06-30 20:54:50 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 20:54:53 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 20:54:53 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 20:54:53 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 20:54:53 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 20:54:59 - bot.database.match_operations - INFO - Retrieved 25 active matches for player 632154057477455882 (limit: 25)
2025-06-30 20:57:16 - bot.database.match_operations - INFO - Retrieved 25 active matches for player 492208498533203970 (limit: 25)
2025-06-30 21:26:37 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 21:26:37 - bot.database.database - INFO - Database connection closed
2025-06-30 21:26:37 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 21:26:39 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 21:26:39 - bot.database.database - INFO - Initializing database...
2025-06-30 21:26:39 - bot.database.database - INFO - Database initialized successfully
2025-06-30 21:26:39 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 21:26:39 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 21:26:39 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 21:26:39 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 21:26:39 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 21:26:39 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 21:26:39 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 21:26:39 - __main__ - ERROR - Failed to load cog bot.cogs.housekeeping: Extension 'bot.cogs.housekeeping' raised an error: InvalidRequestError: Table 'matches' is already defined for this MetaData instance.  Specify 'extend_existing=True' to redefine options and columns on an existing Table object.
2025-06-30 21:26:39 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 21:26:40 - __main__ - INFO - Successfully synced 13 command(s) to guild 743306931522764860
2025-06-30 21:26:40 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 21:26:40 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 21:26:40 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 21:26:40 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 21:26:40 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 21:26:40 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 21:26:40 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 21:26:40 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 21:26:40 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 21:26:40 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 21:26:40 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 21:26:40 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 21:26:40 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 21:26:40 - __main__ - INFO - Successfully synced 13 command(s) to guild 685704304983932949
2025-06-30 21:26:40 - __main__ - INFO - Multi-guild sync complete: 26 total command instances deployed
2025-06-30 21:26:40 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 21:26:42 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 21:26:42 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 21:26:42 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 21:27:56 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 21:27:56 - bot.database.database - INFO - Database connection closed
2025-06-30 21:29:02 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 21:29:02 - bot.database.database - INFO - Initializing database...
2025-06-30 21:29:02 - bot.database.database - INFO - Database initialized successfully
2025-06-30 21:29:02 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 21:29:02 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 21:29:02 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 21:29:02 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 21:29:02 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 21:29:02 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 21:29:02 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 21:29:02 - __main__ - ERROR - Failed to load cog bot.cogs.housekeeping: Extension 'bot.cogs.housekeeping' raised an error: InvalidRequestError: Table 'matches' is already defined for this MetaData instance.  Specify 'extend_existing=True' to redefine options and columns on an existing Table object.
2025-06-30 21:29:02 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 21:29:02 - __main__ - INFO - Successfully synced 13 command(s) to guild 743306931522764860
2025-06-30 21:29:02 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 21:29:02 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 21:29:02 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 21:29:02 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 21:29:02 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 21:29:02 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 21:29:02 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 21:29:02 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 21:29:02 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 21:29:02 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 21:29:02 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 21:29:02 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 21:29:02 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 21:29:02 - __main__ - INFO - Successfully synced 13 command(s) to guild 685704304983932949
2025-06-30 21:29:02 - __main__ - INFO - Multi-guild sync complete: 26 total command instances deployed
2025-06-30 21:29:02 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 21:29:05 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 21:29:05 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 21:29:05 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 21:40:00 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 21:40:00 - bot.database.database - INFO - Database connection closed
2025-06-30 21:41:03 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 21:41:03 - bot.database.database - INFO - Initializing database...
2025-06-30 21:41:03 - bot.database.database - INFO - Database initialized successfully
2025-06-30 21:41:03 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 21:41:03 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 21:41:03 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 21:41:03 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 21:41:03 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 21:41:03 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 21:41:03 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 21:41:03 - __main__ - ERROR - Failed to load cog bot.cogs.housekeeping: Extension 'bot.cogs.housekeeping' raised an error: InvalidRequestError: Table 'matches' is already defined for this MetaData instance.  Specify 'extend_existing=True' to redefine options and columns on an existing Table object.
2025-06-30 21:41:03 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 21:41:03 - __main__ - INFO - Successfully synced 13 command(s) to guild 743306931522764860
2025-06-30 21:41:03 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 21:41:03 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 21:41:03 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 21:41:03 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 21:41:03 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 21:41:03 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 21:41:03 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 21:41:03 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 21:41:03 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 21:41:03 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 21:41:03 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 21:41:03 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 21:41:03 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 21:41:04 - __main__ - INFO - Successfully synced 13 command(s) to guild 685704304983932949
2025-06-30 21:41:04 - __main__ - INFO - Multi-guild sync complete: 26 total command instances deployed
2025-06-30 21:41:04 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 21:41:06 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 21:41:06 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 21:41:06 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 21:42:37 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 21:42:37 - bot.database.database - INFO - Database connection closed
2025-06-30 21:42:55 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 21:42:55 - bot.database.database - INFO - Initializing database...
2025-06-30 21:42:55 - bot.database.database - INFO - Database initialized successfully
2025-06-30 21:42:55 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 21:42:55 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 21:42:55 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 21:42:55 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 21:42:55 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 21:42:55 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 21:42:55 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 21:42:55 - __main__ - ERROR - Failed to load cog bot.cogs.housekeeping: Extension 'bot.cogs.housekeeping' raised an error: InvalidRequestError: Table 'matches' is already defined for this MetaData instance.  Specify 'extend_existing=True' to redefine options and columns on an existing Table object.
2025-06-30 21:42:55 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 21:42:55 - __main__ - INFO - Successfully synced 13 command(s) to guild 743306931522764860
2025-06-30 21:42:55 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 21:42:55 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 21:42:55 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 21:42:55 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 21:42:55 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 21:42:55 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 21:42:55 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 21:42:55 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 21:42:55 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 21:42:55 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 21:42:55 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 21:42:55 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 21:42:55 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 21:42:55 - __main__ - INFO - Successfully synced 13 command(s) to guild 685704304983932949
2025-06-30 21:42:55 - __main__ - INFO - Multi-guild sync complete: 26 total command instances deployed
2025-06-30 21:42:55 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 21:42:57 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 21:42:57 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 21:42:57 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 21:48:34 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 21:48:34 - bot.database.database - INFO - Database connection closed
2025-06-30 21:48:52 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 21:48:52 - bot.database.database - INFO - Initializing database...
2025-06-30 21:48:52 - bot.database.database - INFO - Database initialized successfully
2025-06-30 21:48:52 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 21:48:52 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 21:48:52 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 21:48:52 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 21:48:52 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 21:48:52 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 21:48:52 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 21:48:52 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 21:48:52 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 21:48:52 - __main__ - INFO - Successfully synced 17 command(s) to guild 743306931522764860
2025-06-30 21:48:52 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 21:48:52 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 21:48:52 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 21:48:52 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 21:48:52 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 21:48:52 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 21:48:52 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 21:48:52 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 21:48:52 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 21:48:52 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 21:48:52 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 21:48:52 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 21:48:52 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 21:48:52 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 21:48:52 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 21:48:52 - __main__ - INFO -   - admin-clear-matches: Clear ALL active matches (Owner only - DESTRUCTIVE)
2025-06-30 21:48:52 - __main__ - INFO -   - admin-clear-match: Clear a specific match by ID (Owner only - DESTRUCTIVE)
2025-06-30 21:48:52 - __main__ - INFO - Successfully synced 17 command(s) to guild 685704304983932949
2025-06-30 21:48:52 - __main__ - INFO - Multi-guild sync complete: 34 total command instances deployed
2025-06-30 21:48:52 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 21:48:54 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 21:48:54 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 21:48:54 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 21:48:54 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 21:49:21 - bot.database.match_operations - INFO - Deleted batch of 25 pending matches (total 25 for this status)
2025-06-30 21:49:21 - bot.database.match_operations - INFO - Deleted batch of 10 awaiting_confirmation matches (total 10 for this status)
2025-06-30 21:49:22 - bot.cogs.housekeeping - INFO - Admin clear matches executed by 492208498533203970 (lightfalcon): {'total_deleted': 35, 'errors': 0, 'pending_count': 25, 'active_count': 0, 'awaiting_confirmation_count': 10}
2025-06-30 21:49:34 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 21:49:34 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 21:49:34 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 21:49:34 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 21:49:34 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 21:49:34 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 21:49:34 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 34 for event 25 with 2 participants
2025-06-30 21:49:34 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 34 for event 25 with 2 participants
2025-06-30 21:49:34 - bot.cogs.challenge - INFO - Challenge 34 created by 492208498533203970 for event Osu std (1v1)
2025-06-30 21:49:43 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 34 cancelled by player 492208498533203970
2025-06-30 21:49:43 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 34 cancelled by player 492208498533203970
2025-06-30 21:50:14 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 21:50:14 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 21:50:14 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 21:50:14 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 21:50:14 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 21:50:14 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 21:50:14 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 35 for event 17 with 2 participants
2025-06-30 21:50:14 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 35 for event 17 with 2 participants
2025-06-30 21:50:14 - bot.cogs.challenge - INFO - Challenge 35 created by 492208498533203970 for event Madden 24 (1v1)
2025-06-30 21:50:38 - bot.cogs.challenge - ERROR - Accept challenge error: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(sqlite3.IntegrityError) UNIQUE constraint failed: match_participants.match_id, match_participants.player_id
[SQL: INSERT INTO match_participants (match_id, player_id, team_id, team_name, placement, elo_change, pp_change, points_earned, elo_before, elo_after, custom_stats, manually_adjusted, adjustment_reason, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, created_at]
[parameters: (85, 3, None, None, None, 0, 0, 0, 1000, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 149, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 300, in _handle_exception
    raise error
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 131, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
             ^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: match_participants.match_id, match_participants.player_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/challenge.py", line 397, in accept_challenge
    result = await self.challenge_ops.accept_challenge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 266, in accept_challenge
    return await _accept(txn_session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 242, in _accept
    match = await self._create_match_from_challenge(challenge, session)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 1025, in _create_match_from_challenge
    elo_result = await session.execute(elo_stmt)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2230, in _execute_internal
    ) = compile_state_cls.orm_pre_session_exec(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 577, in orm_pre_session_exec
    session._autoflush()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3065, in _autoflush
    raise e.with_traceback(sys.exc_info()[2])
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3054, in _autoflush
    self.flush()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 149, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 300, in _handle_exception
    raise error
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 131, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(sqlite3.IntegrityError) UNIQUE constraint failed: match_participants.match_id, match_participants.player_id
[SQL: INSERT INTO match_participants (match_id, player_id, team_id, team_name, placement, elo_change, pp_change, points_earned, elo_before, elo_after, custom_stats, manually_adjusted, adjustment_reason, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, created_at]
[parameters: (85, 3, None, None, None, 0, 0, 0, 1000, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-30 21:50:44 - bot.cogs.challenge - ERROR - Accept challenge error: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(sqlite3.IntegrityError) UNIQUE constraint failed: match_participants.match_id, match_participants.player_id
[SQL: INSERT INTO match_participants (match_id, player_id, team_id, team_name, placement, elo_change, pp_change, points_earned, elo_before, elo_after, custom_stats, manually_adjusted, adjustment_reason, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, created_at]
[parameters: (85, 3, None, None, None, 0, 0, 0, 1000, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 149, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 300, in _handle_exception
    raise error
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 131, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
             ^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: match_participants.match_id, match_participants.player_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/challenge.py", line 397, in accept_challenge
    result = await self.challenge_ops.accept_challenge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 266, in accept_challenge
    return await _accept(txn_session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 242, in _accept
    match = await self._create_match_from_challenge(challenge, session)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 1025, in _create_match_from_challenge
    elo_result = await session.execute(elo_stmt)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2230, in _execute_internal
    ) = compile_state_cls.orm_pre_session_exec(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 577, in orm_pre_session_exec
    session._autoflush()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3065, in _autoflush
    raise e.with_traceback(sys.exc_info()[2])
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3054, in _autoflush
    self.flush()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 149, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 300, in _handle_exception
    raise error
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 131, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(sqlite3.IntegrityError) UNIQUE constraint failed: match_participants.match_id, match_participants.player_id
[SQL: INSERT INTO match_participants (match_id, player_id, team_id, team_name, placement, elo_change, pp_change, points_earned, elo_before, elo_after, custom_stats, manually_adjusted, adjustment_reason, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, created_at]
[parameters: (85, 3, None, None, None, 0, 0, 0, 1000, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-30 21:59:25 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 21:59:25 - bot.database.database - INFO - Database connection closed
2025-06-30 21:59:25 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 21:59:35 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 21:59:35 - bot.database.database - INFO - Initializing database...
2025-06-30 21:59:35 - bot.database.database - INFO - Database initialized successfully
2025-06-30 21:59:35 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 21:59:35 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 21:59:35 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 21:59:35 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 21:59:35 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 21:59:35 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 21:59:35 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 21:59:35 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 21:59:35 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 21:59:35 - __main__ - INFO - Successfully synced 17 command(s) to guild 743306931522764860
2025-06-30 21:59:35 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 21:59:35 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 21:59:35 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 21:59:35 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 21:59:35 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 21:59:35 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 21:59:35 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 21:59:35 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 21:59:35 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 21:59:35 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 21:59:35 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 21:59:35 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 21:59:35 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 21:59:35 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 21:59:35 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 21:59:35 - __main__ - INFO -   - admin-clear-matches: Clear ALL active matches (Owner only - DESTRUCTIVE)
2025-06-30 21:59:35 - __main__ - INFO -   - admin-clear-match: Clear a specific match by ID (Owner only - DESTRUCTIVE)
2025-06-30 21:59:35 - __main__ - INFO - Successfully synced 17 command(s) to guild 685704304983932949
2025-06-30 21:59:35 - __main__ - INFO - Multi-guild sync complete: 34 total command instances deployed
2025-06-30 21:59:35 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 21:59:38 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 21:59:38 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 21:59:38 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 21:59:38 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 22:00:57 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 85 from Challenge 35 with 2 participants (1v1)
2025-06-30 22:00:57 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 85 from Challenge 35 with 2 participants (1v1)
2025-06-30 22:00:57 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 35 fully accepted - Match 85 created
2025-06-30 22:00:57 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 35 fully accepted - Match 85 created
2025-06-30 22:08:28 - __main__ - INFO - Starting notification preferences migration...
2025-06-30 22:08:28 - __main__ - INFO - Migration completed successfully!
2025-06-30 22:08:28 - __main__ - INFO - Added dm_challenge_notifications column to players table
2025-06-30 22:08:28 - __main__ - INFO - Set default value FALSE for 24 existing players (opt-in)
2025-06-30 22:16:22 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 22:16:22 - bot.database.database - INFO - Database connection closed
2025-06-30 22:16:22 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 22:16:28 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 22:16:28 - bot.database.database - INFO - Initializing database...
2025-06-30 22:16:28 - bot.database.database - INFO - Database initialized successfully
2025-06-30 22:16:28 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 22:16:28 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 22:16:28 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 22:16:28 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 22:16:28 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 22:16:28 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 22:16:28 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 22:16:28 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 22:16:28 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 22:16:28 - __main__ - INFO - Successfully synced 18 command(s) to guild 743306931522764860
2025-06-30 22:16:28 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 22:16:28 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 22:16:28 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 22:16:28 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 22:16:28 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 22:16:28 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 22:16:28 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 22:16:28 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 22:16:28 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 22:16:28 - __main__ - INFO -   - notification-preferences: Configure your notification preferences for challenge events
2025-06-30 22:16:28 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 22:16:28 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 22:16:28 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 22:16:28 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 22:16:28 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 22:16:28 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 22:16:28 - __main__ - INFO -   - admin-clear-matches: Clear ALL active matches (Owner only - DESTRUCTIVE)
2025-06-30 22:16:28 - __main__ - INFO -   - admin-clear-match: Clear a specific match by ID (Owner only - DESTRUCTIVE)
2025-06-30 22:16:28 - __main__ - INFO - Successfully synced 18 command(s) to guild 685704304983932949
2025-06-30 22:16:28 - __main__ - INFO - Multi-guild sync complete: 36 total command instances deployed
2025-06-30 22:16:28 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 22:16:31 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 22:16:31 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 22:16:31 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 22:16:31 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 22:16:37 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 22:16:37 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 22:16:38 - bot.cogs.challenge - INFO - User 632154057477455882 (cam3llya) enabled DM notifications
2025-06-30 22:16:57 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 22:16:57 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 22:16:57 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:16:57 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:16:57 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:16:57 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:16:57 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 36 for event 23 with 2 participants
2025-06-30 22:16:57 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 36 for event 23 with 2 participants
2025-06-30 22:16:57 - bot.cogs.challenge - INFO - Challenge 36 created by 492208498533203970 for event Diep (1v1)
2025-06-30 22:17:06 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 36 cancelled by player 492208498533203970
2025-06-30 22:17:06 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 36 cancelled by player 492208498533203970
2025-06-30 22:17:06 - bot.cogs.challenge - INFO - Sent DM notifications to 1 opted-in users for challenge 36 cancellation
2025-06-30 22:17:18 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 22:17:18 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 22:17:19 - bot.cogs.challenge - INFO - User 632154057477455882 (cam3llya) disabled DM notifications
2025-06-30 22:17:37 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 22:17:37 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 22:17:37 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:17:37 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:17:37 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:17:37 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:17:37 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 37 for event 30 with 2 participants
2025-06-30 22:17:37 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 37 for event 30 with 2 participants
2025-06-30 22:17:37 - bot.cogs.challenge - INFO - Challenge 37 created by 492208498533203970 for event Blitz Duels (1v1)
2025-06-30 22:17:42 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 37 cancelled by player 492208498533203970
2025-06-30 22:17:42 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 37 cancelled by player 492208498533203970
2025-06-30 22:17:56 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 22:17:56 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 22:17:56 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:17:56 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:17:56 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:17:56 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:17:56 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 38 for event 18 with 2 participants
2025-06-30 22:17:56 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 38 for event 18 with 2 participants
2025-06-30 22:17:56 - bot.cogs.challenge - INFO - Challenge 38 created by 492208498533203970 for event NBA 2k25 (1v1)
2025-06-30 22:17:59 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 38 declined by player 632154057477455882
2025-06-30 22:17:59 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 38 declined by player 632154057477455882
2025-06-30 22:18:54 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 22:18:54 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 22:18:54 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:18:54 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:18:54 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:18:54 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:18:54 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 39 for event 47 with 2 participants
2025-06-30 22:18:54 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 39 for event 47 with 2 participants
2025-06-30 22:18:55 - bot.cogs.challenge - INFO - Challenge 39 created by 492208498533203970 for event Protobowl (1v1)
2025-06-30 22:19:10 - bot.cogs.challenge - ERROR - Accept challenge error: (sqlite3.IntegrityError) UNIQUE constraint failed: match_participants.match_id, match_participants.player_id
[SQL: INSERT INTO match_participants (match_id, player_id, team_id, team_name, placement, elo_change, pp_change, points_earned, elo_before, elo_after, custom_stats, manually_adjusted, adjustment_reason, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, created_at]
[parameters: (86, 3, None, None, None, 0, 0, 0, 1000, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2114, in _exec_insertmany_context
    dialect.do_execute(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 149, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 300, in _handle_exception
    raise error
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 131, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
             ^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: match_participants.match_id, match_participants.player_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/challenge.py", line 397, in accept_challenge
    result = await self.challenge_ops.accept_challenge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 266, in accept_challenge
    return await _accept(txn_session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 242, in _accept
    match = await self._create_match_from_challenge(challenge, session)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 1042, in _create_match_from_challenge
    await session.flush()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 801, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1143, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1840, in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2122, in _exec_insertmany_context
    self._handle_dbapi_exception(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2114, in _exec_insertmany_context
    dialect.do_execute(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 149, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 300, in _handle_exception
    raise error
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 131, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: match_participants.match_id, match_participants.player_id
[SQL: INSERT INTO match_participants (match_id, player_id, team_id, team_name, placement, elo_change, pp_change, points_earned, elo_before, elo_after, custom_stats, manually_adjusted, adjustment_reason, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, created_at]
[parameters: (86, 3, None, None, None, 0, 0, 0, 1000, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-30 22:26:10 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 22:26:10 - bot.database.database - INFO - Database connection closed
2025-06-30 22:26:10 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 22:26:17 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 22:26:17 - bot.database.database - INFO - Initializing database...
2025-06-30 22:26:17 - bot.database.database - INFO - Database initialized successfully
2025-06-30 22:26:17 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 22:26:17 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 22:26:17 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 22:26:17 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 22:26:17 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 22:26:17 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 22:26:17 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 22:26:17 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 22:26:17 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 22:26:17 - __main__ - INFO - Successfully synced 18 command(s) to guild 743306931522764860
2025-06-30 22:26:17 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 22:26:17 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 22:26:17 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 22:26:17 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 22:26:17 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 22:26:17 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 22:26:17 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 22:26:17 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 22:26:17 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 22:26:17 - __main__ - INFO -   - notification-preferences: Configure your notification preferences for challenge events
2025-06-30 22:26:17 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 22:26:17 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 22:26:17 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 22:26:17 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 22:26:17 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 22:26:17 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 22:26:17 - __main__ - INFO -   - admin-clear-matches: Clear ALL active matches (Owner only - DESTRUCTIVE)
2025-06-30 22:26:17 - __main__ - INFO -   - admin-clear-match: Clear a specific match by ID (Owner only - DESTRUCTIVE)
2025-06-30 22:26:18 - __main__ - INFO - Successfully synced 18 command(s) to guild 685704304983932949
2025-06-30 22:26:18 - __main__ - INFO - Multi-guild sync complete: 36 total command instances deployed
2025-06-30 22:26:18 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 22:26:21 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 22:26:21 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 22:26:21 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 22:26:21 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 22:27:09 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 86 from Challenge 39 with 2 participants (1v1)
2025-06-30 22:27:09 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 86 from Challenge 39 with 2 participants (1v1)
2025-06-30 22:27:09 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 39 fully accepted - Match 86 created
2025-06-30 22:27:09 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 39 fully accepted - Match 86 created
2025-06-30 22:27:30 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 22:27:30 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 22:27:30 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:27:30 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:27:30 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:27:30 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:27:30 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 40 for event 30 with 2 participants
2025-06-30 22:27:30 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 40 for event 30 with 2 participants
2025-06-30 22:27:30 - bot.cogs.challenge - INFO - Challenge 40 created by 492208498533203970 for event Blitz Duels (1v1)
2025-06-30 22:27:36 - bot.cogs.challenge - ERROR - Accept challenge error: (sqlite3.IntegrityError) UNIQUE constraint failed: match_participants.match_id, match_participants.player_id
[SQL: INSERT INTO match_participants (match_id, player_id, team_id, team_name, placement, elo_change, pp_change, points_earned, elo_before, elo_after, custom_stats, manually_adjusted, adjustment_reason, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, created_at]
[parameters: (87, 3, None, None, None, 0, 0, 0, 1000, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2114, in _exec_insertmany_context
    dialect.do_execute(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 149, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 300, in _handle_exception
    raise error
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 131, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
             ^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: match_participants.match_id, match_participants.player_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/challenge.py", line 397, in accept_challenge
    result = await self.challenge_ops.accept_challenge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 266, in accept_challenge
    return await _accept(txn_session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 242, in _accept
    match = await self._create_match_from_challenge(challenge, session)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 1051, in _create_match_from_challenge
    await session.flush()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 801, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1143, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1840, in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2122, in _exec_insertmany_context
    self._handle_dbapi_exception(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2114, in _exec_insertmany_context
    dialect.do_execute(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 149, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 300, in _handle_exception
    raise error
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 131, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: match_participants.match_id, match_participants.player_id
[SQL: INSERT INTO match_participants (match_id, player_id, team_id, team_name, placement, elo_change, pp_change, points_earned, elo_before, elo_after, custom_stats, manually_adjusted, adjustment_reason, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, created_at]
[parameters: (87, 3, None, None, None, 0, 0, 0, 1000, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-30 22:27:42 - bot.cogs.challenge - ERROR - Accept challenge error: (sqlite3.IntegrityError) UNIQUE constraint failed: match_participants.match_id, match_participants.player_id
[SQL: INSERT INTO match_participants (match_id, player_id, team_id, team_name, placement, elo_change, pp_change, points_earned, elo_before, elo_after, custom_stats, manually_adjusted, adjustment_reason, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, created_at]
[parameters: (87, 3, None, None, None, 0, 0, 0, 1000, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2114, in _exec_insertmany_context
    dialect.do_execute(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 149, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 300, in _handle_exception
    raise error
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 131, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
             ^^^^^^^^^^
sqlite3.IntegrityError: UNIQUE constraint failed: match_participants.match_id, match_participants.player_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/jacob/LB-Tournament-Arc/bot/cogs/challenge.py", line 397, in accept_challenge
    result = await self.challenge_ops.accept_challenge(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 266, in accept_challenge
    return await _accept(txn_session)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 242, in _accept
    match = await self._create_match_from_challenge(challenge, session)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/bot/operations/challenge_operations.py", line 1051, in _create_match_from_challenge
    await session.flush()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 801, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1143, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1840, in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2122, in _exec_insertmany_context
    self._handle_dbapi_exception(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2114, in _exec_insertmany_context
    dialect.do_execute(
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 149, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 300, in _handle_exception
    raise error
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 131, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 40, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/cursor.py", line 32, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 122, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/jacob/LB-Tournament-Arc/venv/lib/python3.12/site-packages/aiosqlite/core.py", line 105, in run
    result = function()
             ^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: match_participants.match_id, match_participants.player_id
[SQL: INSERT INTO match_participants (match_id, player_id, team_id, team_name, placement, elo_change, pp_change, points_earned, elo_before, elo_after, custom_stats, manually_adjusted, adjustment_reason, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, created_at]
[parameters: (87, 3, None, None, None, 0, 0, 0, 1000, None, None, 0, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-06-30 22:34:28 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 22:34:28 - bot.database.database - INFO - Database connection closed
2025-06-30 22:34:28 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 22:34:32 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 22:34:32 - bot.database.database - INFO - Initializing database...
2025-06-30 22:34:32 - bot.database.database - INFO - Database initialized successfully
2025-06-30 22:34:32 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 22:34:32 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 22:34:32 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 22:34:32 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 22:34:32 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 22:34:32 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 22:34:32 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 22:34:32 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 22:34:32 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 22:34:33 - __main__ - INFO - Successfully synced 18 command(s) to guild 743306931522764860
2025-06-30 22:34:33 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 22:34:33 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 22:34:33 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 22:34:33 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 22:34:33 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 22:34:33 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 22:34:33 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 22:34:33 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 22:34:33 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 22:34:33 - __main__ - INFO -   - notification-preferences: Configure your notification preferences for challenge events
2025-06-30 22:34:33 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 22:34:33 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 22:34:33 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 22:34:33 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 22:34:33 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 22:34:33 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 22:34:33 - __main__ - INFO -   - admin-clear-matches: Clear ALL active matches (Owner only - DESTRUCTIVE)
2025-06-30 22:34:33 - __main__ - INFO -   - admin-clear-match: Clear a specific match by ID (Owner only - DESTRUCTIVE)
2025-06-30 22:34:33 - __main__ - INFO - Successfully synced 18 command(s) to guild 685704304983932949
2025-06-30 22:34:33 - __main__ - INFO - Multi-guild sync complete: 36 total command instances deployed
2025-06-30 22:34:33 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 22:34:36 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 22:34:36 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 22:34:36 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 22:34:36 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 22:34:39 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 87 from Challenge 40 with 2 participants (1v1)
2025-06-30 22:34:39 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 87 from Challenge 40 with 2 participants (1v1)
2025-06-30 22:34:39 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 40 fully accepted - Match 87 created
2025-06-30 22:34:39 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 40 fully accepted - Match 87 created
2025-06-30 22:34:59 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 22:34:59 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 22:34:59 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:34:59 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:34:59 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:34:59 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:34:59 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 41 for event 21 with 2 participants
2025-06-30 22:34:59 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 41 for event 21 with 2 participants
2025-06-30 22:35:00 - bot.cogs.challenge - INFO - Challenge 41 created by 492208498533203970 for event VS (1v1)
2025-06-30 22:35:03 - bot.operations.challenge_operations.ChallengeOperations - WARNING - Cleaned up 2 orphaned participants for match_id 88
2025-06-30 22:35:03 - bot.operations.challenge_operations.ChallengeOperations - WARNING - Cleaned up 2 orphaned participants for match_id 88
2025-06-30 22:35:03 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 88 from Challenge 41 with 2 participants (1v1)
2025-06-30 22:35:03 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 88 from Challenge 41 with 2 participants (1v1)
2025-06-30 22:35:03 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 41 fully accepted - Match 88 created
2025-06-30 22:35:03 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 41 fully accepted - Match 88 created
2025-06-30 22:42:24 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 22:42:24 - bot.database.database - INFO - Database connection closed
2025-06-30 22:42:24 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
2025-06-30 22:44:32 - __main__ - INFO - Setting up Tournament Bot...
2025-06-30 22:44:32 - bot.database.database - INFO - Initializing database...
2025-06-30 22:44:32 - bot.database.database - INFO - Database initialized successfully
2025-06-30 22:44:32 - __main__ - INFO - Loaded cog: bot.cogs.admin
2025-06-30 22:44:32 - __main__ - INFO - Loaded cog: bot.cogs.tournament
2025-06-30 22:44:32 - __main__ - INFO - Loaded cog: bot.cogs.player
2025-06-30 22:44:32 - __main__ - INFO - Loaded cog: bot.cogs.challenge
2025-06-30 22:44:32 - __main__ - INFO - Loaded cog: bot.cogs.leaderboard
2025-06-30 22:44:32 - __main__ - INFO - Loaded cog: bot.cogs.events
2025-06-30 22:44:32 - __main__ - INFO - Loaded cog: bot.cogs.match_commands
2025-06-30 22:44:32 - __main__ - INFO - Loaded cog: bot.cogs.housekeeping
2025-06-30 22:44:32 - __main__ - INFO - Attempting to sync commands to 2 guild(s): [743306931522764860, 685704304983932949]...
2025-06-30 22:44:32 - __main__ - INFO - Successfully synced 18 command(s) to guild 743306931522764860
2025-06-30 22:44:32 - __main__ - INFO -   - admin-populate-data: Load/refresh clusters and events from CSV (Owner only)
2025-06-30 22:44:32 - __main__ - INFO -   - list-clusters: View all tournament clusters
2025-06-30 22:44:32 - __main__ - INFO -   - list-events: View events with interactive filtering and pagination
2025-06-30 22:44:32 - __main__ - INFO -   - challenge: Create a match challenge through tournament hierarchy
2025-06-30 22:44:32 - __main__ - INFO -   - accept: Accept a pending challenge invitation
2025-06-30 22:44:32 - __main__ - INFO -   - decline: Decline a pending challenge invitation
2025-06-30 22:44:32 - __main__ - INFO -   - outgoing-challenges: View all challenges you've created
2025-06-30 22:44:32 - __main__ - INFO -   - incoming-challenges: View pending challenges sent to you
2025-06-30 22:44:32 - __main__ - INFO -   - cancel-challenge: Cancel a pending challenge you created
2025-06-30 22:44:32 - __main__ - INFO -   - notification-preferences: Configure your notification preferences for challenge events
2025-06-30 22:44:32 - __main__ - INFO -   - ping: Test slash command infrastructure
2025-06-30 22:44:32 - __main__ - INFO -   - ffa: [DEPRECATED] Use /challenge command instead
2025-06-30 22:44:32 - __main__ - INFO -   - match-report: Report match results with placements
2025-06-30 22:44:32 - __main__ - INFO -   - active-matches: View your ongoing matches
2025-06-30 22:44:32 - __main__ - INFO -   - admin-cleanup-challenges: Clean up expired challenges (Owner only)
2025-06-30 22:44:32 - __main__ - INFO -   - admin-clear-challenges: Clear ALL active challenges (Owner only - DESTRUCTIVE)
2025-06-30 22:44:32 - __main__ - INFO -   - admin-clear-matches: Clear ALL active matches (Owner only - DESTRUCTIVE)
2025-06-30 22:44:32 - __main__ - INFO -   - admin-clear-match: Clear a specific match by ID (Owner only - DESTRUCTIVE)
2025-06-30 22:44:33 - __main__ - INFO - Successfully synced 18 command(s) to guild 685704304983932949
2025-06-30 22:44:33 - __main__ - INFO - Multi-guild sync complete: 36 total command instances deployed
2025-06-30 22:44:33 - __main__ - INFO - Tournament Bot setup complete!
2025-06-30 22:44:35 - __main__ - INFO - Kenjaku#5319 has connected to Discord!
2025-06-30 22:44:35 - __main__ - INFO - Bot is in 2 guilds
2025-06-30 22:44:35 - bot.cogs.challenge - INFO - ChallengeCog operations initialized successfully
2025-06-30 22:44:35 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks started
2025-06-30 22:44:46 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 22:44:46 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 22:44:46 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:44:46 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:44:46 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:44:46 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:44:46 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 42 for event 28 with 2 participants
2025-06-30 22:44:46 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 42 for event 28 with 2 participants
2025-06-30 22:44:46 - bot.cogs.challenge - INFO - Challenge 42 created by 492208498533203970 for event Tough Love Arena (1v1)
2025-06-30 22:44:54 - bot.operations.challenge_operations.ChallengeOperations - WARNING - Match 89 already has 2 participants, skipping participant creation
2025-06-30 22:44:54 - bot.operations.challenge_operations.ChallengeOperations - WARNING - Match 89 already has 2 participants, skipping participant creation
2025-06-30 22:44:54 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 89 from Challenge 42 with 2 participants (1v1)
2025-06-30 22:44:54 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 89 from Challenge 42 with 2 participants (1v1)
2025-06-30 22:44:54 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 42 fully accepted - Match 89 created
2025-06-30 22:44:54 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 42 fully accepted - Match 89 created
2025-06-30 22:45:06 - bot.operations.player_operations - DEBUG - Found existing Player 3 for Discord user 632154057477455882
2025-06-30 22:45:06 - bot.operations.player_operations - DEBUG - Updated activity for Player 3
2025-06-30 22:45:06 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:45:06 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:45:06 - bot.operations.player_operations - DEBUG - Found existing Player 5 for Discord user 492208498533203970
2025-06-30 22:45:06 - bot.operations.player_operations - DEBUG - Updated activity for Player 5
2025-06-30 22:45:06 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 43 for event 11 with 2 participants
2025-06-30 22:45:06 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created challenge 43 for event 11 with 2 participants
2025-06-30 22:45:07 - bot.cogs.challenge - INFO - Challenge 43 created by 492208498533203970 for event Krunker (1v1)
2025-06-30 22:45:24 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 90 from Challenge 43 with 2 participants (1v1)
2025-06-30 22:45:24 - bot.operations.challenge_operations.ChallengeOperations - INFO - Created Match 90 from Challenge 43 with 2 participants (1v1)
2025-06-30 22:45:24 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 43 fully accepted - Match 90 created
2025-06-30 22:45:24 - bot.operations.challenge_operations.ChallengeOperations - INFO - Challenge 43 fully accepted - Match 90 created
2025-06-30 22:52:51 - __main__ - INFO - Shutting down Tournament Bot...
2025-06-30 22:52:51 - bot.database.database - INFO - Database connection closed
2025-06-30 22:52:51 - bot.cogs.housekeeping - INFO - HousekeepingCog: Background tasks stopped
