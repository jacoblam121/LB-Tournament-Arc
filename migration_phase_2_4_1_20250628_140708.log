2025-06-28 14:07:08,381 - __main__ - INFO - ✅ Backup created: tournament_backup_phase_2_4_1_20250628_140708.db
2025-06-28 14:07:08,381 - __main__ - INFO - SQLite version: 3.45.1
2025-06-28 14:07:08,381 - __main__ - INFO - 🔍 Analyzing current database state...
2025-06-28 14:07:08,382 - __main__ - INFO - Current state: 86 events, 69 unique base games
2025-06-28 14:07:08,382 - __main__ - INFO - PlayerEventStats: 1636 records for 17 players
2025-06-28 14:07:08,383 - __main__ - INFO - 🔧 Starting unified Elo migration...
2025-06-28 14:07:08,383 - __main__ - INFO - 💾 Creating legacy backup tables...
2025-06-28 14:07:08,400 - __main__ - INFO - ✅ Created legacy backup tables
2025-06-28 14:07:08,401 - __main__ - INFO - 🔧 Adding required columns...
2025-06-28 14:07:08,401 - __main__ - INFO - ℹ️  scoring_type column already exists in matches table
2025-06-28 14:07:08,405 - __main__ - INFO - ✅ Added supported_scoring_types column to events table
2025-06-28 14:07:08,405 - __main__ - INFO - 📋 Creating event consolidation mapping...
2025-06-28 14:07:08,406 - __main__ - INFO - Created consolidation map for 69 base games
2025-06-28 14:07:08,406 - __main__ - INFO - 🔄 Consolidating fragmented events...
2025-06-28 14:07:08,406 - __main__ - INFO - Updated 69 primary events with unified names
2025-06-28 14:07:08,406 - __main__ - INFO - Marked 17 redundant events for deactivation
2025-06-28 14:07:08,407 - __main__ - INFO - 📊 Consolidating PlayerEventStats records...
2025-06-28 14:07:08,412 - __main__ - INFO - ✅ Consolidated stats for 165 players
2025-06-28 14:07:08,413 - __main__ - INFO - ✅ Deleted 187 redundant PlayerEventStats records
2025-06-28 14:07:08,413 - __main__ - INFO - 🔒 Deactivating redundant events...
2025-06-28 14:07:08,413 - __main__ - INFO - ✅ Deactivated 17 redundant events
2025-06-28 14:07:08,413 - __main__ - INFO - 🔍 Verifying consolidation results...
2025-06-28 14:07:08,413 - __main__ - INFO - ✅ No duplicate active events found
2025-06-28 14:07:08,413 - __main__ - INFO - Final state: 69 active events, 17 deprecated events
2025-06-28 14:07:08,413 - __main__ - INFO - Final PlayerEventStats: 1449 records
2025-06-28 14:07:08,414 - __main__ - INFO - ✅ Rollback script created: rollback_phase_2_4_1_20250628_140708.sh
2025-06-28 14:07:08,419 - __main__ - INFO - ✅ Migration completed successfully!
2025-06-28 14:07:08,419 - __main__ - INFO - 🔍 Analyzing current database state...
2025-06-28 14:07:08,419 - __main__ - INFO - Current state: 86 events, 69 unique base games
2025-06-28 14:07:08,420 - __main__ - INFO - PlayerEventStats: 1449 records for 17 players
2025-06-28 14:07:08,420 - __main__ - INFO - 📊 Migration summary:
2025-06-28 14:07:08,420 - __main__ - INFO -   - Events: 86 → 86 (-0)
2025-06-28 14:07:08,420 - __main__ - INFO -   - PlayerEventStats: 1636 → 1449 (-187)
2025-06-28 14:07:08,420 - __main__ - INFO -   - Backup: tournament_backup_phase_2_4_1_20250628_140708.db
2025-06-28 14:07:08,420 - __main__ - INFO -   - Rollback: rollback_phase_2_4_1_20250628_140708.sh
